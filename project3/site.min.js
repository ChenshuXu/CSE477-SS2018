/*! project3 2018-06-28 */

function Enigma(t){console.log("Enigma constructor start"),this.installListeners()}function parse_json(e){try{var t=$.parseJSON(e)}catch(t){throw"JSON parse error: "+e}return t}Enigma.prototype.installListeners=function(){for(var s=this,t=["q","w","e","r","t","z","u","i","o","a","s","d","f","g","h","j","k","p","y","x","c","v","b","n","m","l"],e=0;e<t.length;e++){var n=t[e];s.installListener(n)}var r=$("#reset");r.click(function(t){t.preventDefault(),console.log("press reset",r),$.ajax({url:"post/enigma.php",data:{reset:"Reset"},method:"POST",success:function(t){var e=parse_json(t);$("body").html(e.html),s.installListeners()}})})},Enigma.prototype.installListener=function(n){var r=this,a=$(".key-"+n);a.click(function(t){t.preventDefault(),console.log("click:",a);var e={},s=n.toUpperCase();e.key=s,$.ajax({url:"post/enigma.php",data:e,method:"POST",success:function(t){var e=parse_json(t);$("body").html(e.html),r.installListeners()}})}),a.mousedown(function(t){a.addClass("pressed")})};